#include <iostream>
#include "visa.h"

int main()
{
	ViSession defaultRM, instr;
	std::string name;
	ViStatus status;
	name = "GPIB0::2::INSTR";
	status = viOpenDefaultRM(&defaultRM);
	std::cout << "Instrument name: " << name << std::endl;
	status = viOpen(defaultRM, (char*)name.c_str(), VI_NULL, VI_NULL, &instr);
	//status = viSetAttribute(instr, VI_ATTR_TMO_VALUE, 5000);
	status = viClose(instr);

	std::cout << "Go to next device?" << std::endl;
	std::cin.get();

	name = "GPIB0::1::INSTR";
	status = viOpen(defaultRM, (char*)name.c_str(), VI_NULL, VI_NULL, &instr);
	//status = viSetAttribute(instr, VI_ATTR_TMO_VALUE, 5000);
	status = viClose(instr);

	return 0;
}